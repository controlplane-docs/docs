---
title: Gemini CLI
sidebarTitle: Gemini CLI
description: Configure the Control Plane MCP Server for Gemini CLI
---

Connect Gemini CLI to Control Plane to manage your infrastructure through natural language conversations.

## Prerequisites

<CardGroup cols={2}>
  <Card title="Gemini CLI" icon="download">
    Get started with [Gemini CLI](https://geminicli.com/docs/get-started/)
  </Card>
  <Card title="Service Account Token" icon="key">
    Create a [service account](/guides/create-service-account) with appropriate permissions
  </Card>
</CardGroup>

## Configuration

<Steps>
  <Step title="Add the MCP Server">
    Ask gemini to show you where the user scope `settings.json` file is:

    ```
    show me where the global user settings.json file is
    ```

    Open the `settings.json` file and add in the control plane mcp server details:

    ```json
    "mcpServers": {
      "cpln": {
        "url": "https://mcp.cpln.io/mcp",
        "headers": {
          "Authorization": "Bearer <your-service-account-token>"
        }
      }
    }
    ```
    <Warning>
      Replace `<your-service-account-token>` with your actual service account token.
    </Warning>

    We recommend the **user** scope to make the MCP server available across all your projects. If you prefer to define it locally, open a .gemini folder in your local project, create a settings.json file inside and update the MCP server there.

  </Step>

  <Step title="Verify the Connection">
    List your configured MCP servers to confirm the setup:
    ```bash
    gemini mcp list
    ```
    You should see cpln listed with a successful connection.
    ```bash
    cpln: https://mcp.cpln.io/mcp (sse) - âœ“ Connected
    ```
  </Step>
</Steps>

## Managing MCP Servers

```bash
# List all MCP servers
gemini mcp list

# Remove an MCP server
gemini mcp remove cpln

# Get help on MCP commands
gemini mcp --help
```

<Note>
  For the latest configuration options and troubleshooting, refer to the official [Gemini CLI Documentation](https://geminicli.com/docs/tools/mcp-server/).
</Note>

## Example Conversation

Here's an example of deploying a public workload through Gemini CLI:

<Steps>
  <Step title="Set Context">
    ```
    Use org "my-org" and gvc "my-gvc" for context.
    ```
  </Step>
  <Step title="Deploy a Workload">
    ```
    Create a publicly accessible workload called "my-api" using nginx:latest on port 80.
    ```
  </Step>
  <Step title="Get the Endpoint">
    ```
    Monitor the readiness of my-api and give me the public endpoint once it's ready.
    ```
  </Step>
</Steps>

## Troubleshooting

<AccordionGroup>
  <Accordion title="Authentication errors">
    - Check that your service account token is valid.
    - Ensure the token is entered without extra spaces or quotes.
    - Verify the token has appropriate permissions (see [Service Account Permissions](/mcp/overview#service-account-permissions)).
    - **Check for typos in the org name** you're using for context, this is a common cause of authentication failures.
  </Accordion>
</AccordionGroup>

## Next Steps

<CardGroup cols={2}>
  <Card title="Usage Examples" icon="lightbulb" href="/mcp/examples">
    See practical examples of Control Plane operations
  </Card>
  <Card title="Policy Reference" icon="shield" href="/reference/policy">
    Learn about permissions and access control
  </Card>
</CardGroup>
