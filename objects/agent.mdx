---
title: 'Agent'
---

## Overview

In situations where your [workload](/objects/workload) needs to consume services from endpoints within a VPC or another private network, you would use a wormhole **agent**.

Control Plane's wormhole technology securely connects your workloads to any TCP or UDP endpoints in VPCs and other private networks, including on-prem data centers and even on a developer's laptop. You establish a wormhole by running an agent VM (agent for short) inside the private network to which you are connecting your workloads.

Control Plane offers agents for both private networks and cloud providers. The agent is installed and configured within the location where it can access the applications or services that your workload requires. It does this by establishing a secure and persistent connection to publicly hosted Control Plane servers. Requests from your workload are tunneled to the agent which performs the request and then tunnels the response back. This flow occurs in a performant manner and is transparent to the workload.

Agents are scoped to an [org](/reference/org) and are used in conjunction with [identities](/reference/identity) to set up [network resources](/reference/identity#network-resources-cloud-wormhole).

## High Availability (HA)

Agents run in active-passive mode. If an active agent misses a set amount of heartbeats, it is considered offline and replaced by a redundant agent.

The recommended method to configure a highly available agent deployment is by using an instance group (also called an autoscaling group on AWS or a VMSS/virtual machine scale set on Azure).

The autoscaling group template must be configured in the same way as a single VM in terms of cloud configuration, network settings, etc. As the agent's functionality is not CPU intensive, that metric cannot be used to scale instances up and down. Instead, use a fixed sized group set to a minimum of 2 and a maximum of the number of zones used within your infrastructure.

## BYOK Locations Configuration to Allow Agent Connection

For BYOK locations, ensure that the [Middlebox is enabled](/self-hosted/byok/settings/agent#middlebox).

## Guides

- [Create an Agent](/guides/create-an-agent)
- Setup an Agent
  - [AWS](/guides/setup-an-agent/aws)
  - [Azure](/guides/setup-an-agent/azure)
  - [GCP](/guides/setup-an-agent/gcp)
  - [Private Network](/guides/setup-an-agent/private)
  - [Kubernetes Cluster](/guides/setup-an-agent/k8s)
- [Agent Sizing Guidance](/guides/agent-sizing-guidance/index)
  - [AWS](/guides/agent-sizing-guidance/aws)
  - [GCP](/guides/agent-sizing-guidance/gcp)
- [Guide for Workload but requires an agent](/guides/agent-sizing-guidance/index)
- [Guide for identity but requires an agent](/guides/agent-sizing-guidance/index)
- [Any guide that utilizes an agent](/guides/agent-sizing-guidance/index)

## Permissions

The permissions below are used to define [policies](/reference/policy) together with one or more of the four
[principal types](/concepts/principal_types):

| Permission | Description                 | Implies                                 |
| :--------- | :-------------------------- | :-------------------------------------- |
| create     | Create new agents           |                                         |
| delete     | Delete service agents       |                                         |
| edit       | Modify existing agents      | view                                    |
| manage     | Full access                 | create, delete, edit, manage, use, view |
| use        | Use an agent in an identity | view                                    |
| view       | Read-only access            |                                         |

## API Reference

Click to see [API Agent Reference](/api-reference/agent)

## CLI Reference

Click to see [CLI Agent Reference](/references/cli/agent)

## Terraform Reference

Click to see [Terraform Agent Resource](/references/terraform/resources/cpln_gvc)

Click to see [Terraform Agent Data Source](/references/terraform/data-sources/cpln_gvc)
