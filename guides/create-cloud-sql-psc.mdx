---
title: Create Cloud SQL for PSC
---

## Overview

Follow the steps below to create a [Cloud SQL](https://cloud.google.com/sql/docs/introduction) instance with [Private Service Connect](https://cloud.google.com/vpc/docs/private-service-connect) (PSC) enabled within Google Cloud.

## Prerequisites

- [Google Cloud Platform (GCP)](https://cloud.google.com/) account.
- Install the latest [SDK](https://cloud.google.com/sdk/docs/install).
- Enable the following APIs in your GCP project:
    - `SQL Admin`
    - `Compute Engine`
    - `Service Networking`

## Create using the GCP Console

### Step 1 - Create a VPC
1. Navigate to `VPC Networks` and select `Create VPC Network`.
2. Name the VPC, enable the necessary firewall rules for your intended use and click `Create`.

### Step 2 - Create Cloud SQL
1. Navigate to `SQL` and select `Create Instance`.
2. Choose your database engine (ex. PostgreSQL).
3. Select your preferred SQL edition.
4. Name your SQL instance and choose a secure password.
<Warning>
Ensure the region selected in the Cloud SQL matches the region in your Control Plane workload. If the regions are not the same, the Private Service Connection will fail.
</Warning>
5. Scroll to the bottom of the page and click `Show Configuration Options` to drop down more options.
6. Select the `Connections` tab, disable Public IP and enable Private IP.
7. Enable Private Service Access (PSA)
    - Under Private IP, a drop down should appear to configure PSA.
    - Choose your VPC and select `Set up connection`.
    - You can allocate an IP range by either automatically allocating or by selecting your own range
    - Select `Continue` and `Create Connection`
8. Once the connection is created you can create your instance
<Warning>
Private Service Connect enablement is not currently supported in the GCP console. After the instance is created, you must edit the Cloud SQL instance using the [SDK](https://cloud.google.com/sdk/docs/install).
</Warning>

### Step 3 - Enable Private Service Connect
1. Use the `gcloud` CLI to edit the Cloud SQL instance. When patching the Cloud SQL instance, you must specify the allowed consumer project id(s) that will be used to consume the instance.
2. Use the following `gcloud` command:
```bash
gcloud sql instances patch INSTANCE_NAME \
--enable-private-service-connect \
--allowed-psc-projects=CONSUMER_PROJECT_ID
```
<Tip>
If you need to change the allowed consumer projects in the future, use the same command and omit the ```---enable-private-service-connect``` flag.
</Tip>

### Next Steps

- Once your Cloud SQL instance is created with PSC enabled, you can find your service attachment under `Connections` in your instance.
- Control Plane will use this service attachment to create the PSC endpoint on the consumer end in order for your workload to securely connect to the Cloud SQL.