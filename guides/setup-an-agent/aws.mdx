---
title: AWS
---

### Overview

Follow the steps below to install and configure an [agent](/reference/agent) within your Amazon Web Services (AWS) environment.

### Prerequisites

- Review the [Agent](/reference/agent) reference page.
- [Amazon Web Services](https://aws.amazon.com/) (AWS) account.

### Step One - Create an Agent

Follow the [Create an Agent](/guides/agent) guide to define an agent and generate the bootstrap config file that will be used in
[step two](#step-two-launch-an-agent-in-aws).

### Step Two - Launch an agent in AWS

1. Log in to the [AWS Console](https://console.aws.amazon.com).
2. Click this [link](https://aws.amazon.com/marketplace/pp/prodview-dq5cug2iej46m) to be directed to the `Control Plane Secure Communications Agent` within the AWS Marketplace.
   - For the `ARM`s version of the agent, [click here](https://aws.amazon.com/marketplace/pp/prodview-fvvtn73sdxxos).
3. Click the `Continue to Subscribe` button in the upper right corner.
4. After reading the terms and conditions, click the `Accept Terms`.
5. After the subscription has loaded, click the `Continue to Configuration` button in the upper right corner.
6. Click the `region` pull-down and select the region where your AWS resources reside.
7. Click the `Continue to Launch` button in the upper right corner.
8. Click the `Choose Action` pull-down and select `Launch through EC2`. Click the `Launch` button.
9. The `Launch an instance` wizard will be displayed.
10. Under the `Name and tag` section, enter the agent's name. (e.g., `cpln-agent`).
11. Under the `Instance type` section, select an applicable instance type.

<Tip>
  Refer to the [Agent Sizing Guidance](/reference/agent#agent-sizing-guidance) page for additional details on which instance type to select.
</Tip>

12. `Optional:` Under the `Key pair(login)` section, select or create a new key pair to
    enable SSH access to the agent. A key pair is necessary only for accessing the
    agent during troubleshooting.

<Tip>
If you do not have an AWS key-pair created, the console will help you to create one.

Since the agent instance will never need to be connected to (except for troubleshooting),
you may proceed without a key-pair.

</Tip>

13. Under the `Network setting` section, review the details and verify that the selected VPC is the same as the AWS resource you are trying to access.

<Tip>
For the agent to properly connect to the Control Plane servers, it requires outbound Internet access.

Verify that the `Auto-assign Public IP` option is set to `Enable`.

If your requirements do not allow the instance to have a public IP, please review the section
`How do instances without public IP addresses access the Internet` in this [AWS FAQ](https://aws.amazon.com/vpc/faqs/).

Either create or select an existing security group. The security groups belonging to the resources that the agent will need to
have access to will require to have the security group belonging to the agent added to its list of allowed inbound traffic.

Initially, remove the checkbox for the "Allow SSH from" property. SSH access is only necessary for troubleshooting purposes. Control Plane will never need to connect directly to the agent.

</Tip>

14. Under the `Configure storage` section, click the `Advanced` link and expand the volume property. Modify the `Delete on termination`
    dropdown to `Yes`. This will ensure the associated volume is removed if the agent is terminated, thereby preventing any orphaned volumes.

15. Expand the `Advanced details` section. Scroll to the bottom and paste the contents
    of the JSON payload (from the bootstrap config file) generated in [step one](#step-one-create-an-agent) within the `User data` textbox.
    Please review the other properties in this section to check if any default values need to be modified.

16. Click `Launch instance` in the lower right corner.

17. After a brief moment, the instance will launch and be ready to process requests.

### Next Steps

Now that you have an agent configured and running, it can be used within an [identity](/reference/identity) to allow your
[workload](/reference/workload) to connect to your internal AWS resources.
