---
title: NATS Account
---

NATS Account secrets store credentials for authenticating with NATS messaging systems, including [NGS (NATS Global Service)](https://synadia.com/ngs). Use them for connecting workloads to NATS clusters using NKey-based authentication.

## Use Cases

- **NGS Cloud Access**: Connect to Synadia's global NATS service
- **NATS Cluster Authentication**: Authenticate with self-hosted NATS clusters
- **Microservice Messaging**: Enable pub/sub communication between services
- **Event-Driven Architecture**: Connect event producers and consumers
- **IoT Message Brokers**: Handle high-throughput device messaging

## Configuration Options

| Field | Description | Required |
|:------|:------------|:---------|
| `accountId` | NATS account public key (starts with `A`) | Yes |
| `privateKey` | Account private/seed key (starts with `S`) | Yes |

<Warning>
NATS NKeys contain embedded checksums and must be generated using official NATS tools. Random strings will not work.
</Warning>

---

## Create a NATS Account Secret

Choose from any of the four methods below to create a NATS Account secret:

<CardGroup cols={2}>
  <Card title="Console UI" icon="desktop" href="#console-ui">
    Create using the web interface
  </Card>
  <Card title="CLI" icon="terminal" href="#cli">
    Create using the command line
  </Card>
  <Card title="Terraform" icon="code" href="#terraform">
    Create using infrastructure as code
  </Card>
  <Card title="Pulumi" icon="code" href="#pulumi">
    Create using Pulumi
  </Card>
</CardGroup>

---

## Console UI

### UI Form

1. In the Console, navigate to **Secrets** and click **New**, or use the **Create** dropdown in the top-right corner and select **Secret**.
2. Enter a **Name** and optional **Description**.
3. Select **NATS Account** as the secret type.
4. Click **Data** in the left pane.
5. Enter the **Account ID** (starts with `A`).
6. Enter the **Private Key** (starts with `S`).
7. Click **Create**.

### Apply YAML

Use the **Apply** feature in the Console to create a secret by pasting YAML:

```yaml
kind: secret
name: my-nats-account
description: NATS account for messaging service
type: nats-account
data:
  accountId: AXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
  privateKey: SXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
```

---

## CLI

```bash
cpln secret create-nats \
  --name my-nats-account \
  --account-id AXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX \
  --private-key SXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX \
  --org my-org
```

---

## Terraform

```hcl
resource "cpln_secret" "nats_account" {
  name        = "my-nats-account"
  description = "NATS account for messaging service"

  nats_account {
    account_id  = "AXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
    private_key = "SXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
  }
}
```

<Warning>
This example uses placeholder NKeys for testing. In production, use Terraform variables or a secrets manager. Generate real NKeys using the `nsc` or `nk` tools as shown below.
</Warning>

---

## Pulumi

<Tabs>
  <Tab title="TypeScript">
    ```typescript
    import * as cpln from "@pulumiverse/cpln";

    const natsSecret = new cpln.Secret("my-nats-account", {
      name: "my-nats-account",
      description: "NATS account for messaging service",
      natsAccount: {
        accountId: "AXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
        privateKey: "SXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
      },
    });
    ```
  </Tab>
  <Tab title="Python">
    ```python
    import pulumiverse_cpln as cpln

    nats_secret = cpln.Secret("my-nats-account",
        name="my-nats-account",
        description="NATS account for messaging service",
        nats_account={
            "account_id": "AXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
            "private_key": "SXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
        })
    ```
  </Tab>
  <Tab title="Go">
    ```go
    package main

    import (
        "github.com/pulumi/pulumi/sdk/v3/go/pulumi"
        "github.com/pulumiverse/pulumi-cpln/sdk/go/cpln"
    )

    func main() {
        pulumi.Run(func(ctx *pulumi.Context) error {
            _, err := cpln.NewSecret(ctx, "my-nats-account", &cpln.SecretArgs{
                Name:        pulumi.String("my-nats-account"),
                Description: pulumi.String("NATS account for messaging service"),
                NatsAccount: &cpln.SecretNatsAccountArgs{
                    AccountId:  pulumi.String("AXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"),
                    PrivateKey: pulumi.String("SXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"),
                },
            })
            return err
        })
    }
    ```
  </Tab>
  <Tab title="C#">
    ```csharp
    using Pulumi;
    using Pulumiverse.Cpln;
    using Pulumiverse.Cpln.Inputs;

    return await Deployment.RunAsync(() =>
    {
        var natsSecret = new Secret("my-nats-account", new SecretArgs
        {
            Name = "my-nats-account",
            Description = "NATS account for messaging service",
            NatsAccount = new SecretNatsAccountArgs
            {
                AccountId = "AXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
                PrivateKey = "SXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
            },
        });
    });
    ```
  </Tab>
</Tabs>

---

## Generating NATS Keys

NATS uses NKeys for authentication. These cryptographic keys must be generated using official NATS tools.

### Using nsc (NATS CLI)

Install the NSC tool and generate keys:

```bash
# Install nsc
brew install nats-io/nats-tools/nsc

# Generate an account keypair
nsc generate nkey --account

# Output example:
# AXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX  <- Account ID
# SXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX  <- Private Key (seed)
```

### Using nk (NKey Tool)

```bash
# Install nk
go install github.com/nats-io/nkeys/nk@latest

# Generate an account keypair
nk gen account

# Output shows the account ID and seed
```

<Note>
The Account ID always starts with `A` and the private/seed key always starts with `S`. These prefixes indicate the key type and are part of the NKey specification.
</Note>

---

## NGS Cloud Account Setup

To use NATS with NGS (Synadia's global NATS service):

1. **Sign up for NGS** at [app.ngs.global](https://app.ngs.global)
2. **Create an account** in your NGS organization
3. **Export credentials** using the NSC tool:

```bash
# Log in to NGS
nsc login

# List your accounts
nsc list accounts

# Generate credentials for your account
nsc generate creds -a MyAccount > my-account.creds
```

4. **Extract keys** from the credentials file for use in Control Plane

---

## Using with NGS Cloud Account

For NGS integration, you can also create an NGS [Cloud Account](/reference/cloudaccount) which provides managed connectivity. The NATS Account secret type is used for the underlying authentication:

```yaml
kind: cloudaccount
name: ngs-connection
provider: ngs
data:
  secretLink: //secret/my-nats-account
```

<Tip>
When using NGS Cloud Accounts, the NATS Account secret provides the authentication credentials, while the Cloud Account resource manages the connection to NGS infrastructure.
</Tip>

---

## Best Practices

<AccordionGroup>
  <Accordion title="Use separate accounts per environment">
    Create distinct NATS accounts for development, staging, and production to isolate message traffic and credentials.
  </Accordion>
  <Accordion title="Implement key rotation">
    Regularly rotate NATS keys. Generate new keypairs, update the secret, and phase out old keys.
  </Accordion>
  <Accordion title="Scope permissions appropriately">
    Use NATS account permissions to limit which subjects each account can publish to or subscribe from.
  </Accordion>
  <Accordion title="Monitor account usage">
    Track message rates and connection counts per account to detect anomalies or unauthorized access.
  </Accordion>
</AccordionGroup>

---

## Next Steps

<CardGroup cols={2}>
  <Card title="Cloud Accounts" icon="cloud" href="/reference/cloudaccount">
    Set up NGS cloud account integration
  </Card>
  <Card title="Using Secrets in Workloads" icon="cube" href="/guides/create-secret/overview#using-secrets-in-workloads">
    Learn how to grant access and inject secrets
  </Card>
</CardGroup>
