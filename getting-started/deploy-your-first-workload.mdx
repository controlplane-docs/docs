---
title: 2. Deploy Your First Workload
---

Follow the steps below to get started using Control Plane by deploying a sample application.

This quick start will demonstrate:

- Logging in to the Control Plane console.
- Creating a [GVC](/reference/gvc) and a [Workload](/reference/workload).
- Deploying an application to multiple cloud providers and locations.

## Create a Workload

In this step, you will deploy a sample application by creating a [Workload](/objects/workload).

<Tabs>
  <Tab title="Console">
      <Steps>
         <Step title="Navigate to Create Form">
            Either use the `Create` button on top right and select Workload, or navigate to `Workloads` page from the left side menu. 
            Once the workload list is, click the `New` button above the table.
         </Step>
         <Step title="Name The Workload">
            Enter a name for your workload and click `Next (Container 1)`.
            Workload name must be at least 2 characters and it must starts with a letter.
         </Step>
         <Step title="Configure Container">
            In the `Image` textbox, type `cplnquickstarts/helloworld-go`
            The image `cplnquickstarts/helloworld-go` is a web app written in Go. When the Workload is navigated to, it will display the cloud provider and location in the browser.
            
            Toggle on the `Serves Traffic` switch to indicate that this workload will be serving requests on port 8080.
            <Note>
               The default port number in the UI is 8080 and happens to be the exposed port of the sample web app. Your containerized application may expose any other port except for the ports listed [here](/reference/workload#ports).
            </Note>

            Container name will be derived from the image name. Feel free to override it and customize the container name.
         </Step>
         <Step title="Allow Public Access">
            At the top of the Workload form, a `Make Public` button will appear. 

            By default, the workload firewall is closed to external inbound, external outbound and internal communication.

            Click `Make Public` button to allow all external inbound and outbound communication.
         </Step>
         <Step title="Confirm Creation">
            Click the `Create` button. The workload will be created and the `Info` page will be shown.
         </Step>
      </Steps>
   </Tab>
   <Tab title="CLI">
      Install CLI
      Setup default profile with org and gvc context

      ```bash Create a Workload Command
      cpln workload create --name example --image cplnquickstarts/helloworld-go --public
      ```

      `--public` argument opens this workload to all external inbound and outbound communication.

      <Note>
         The image `cplnquickstarts/helloworld-go` is a web app written in Go.

         When the Workload is navigated to, it will display the cloud provider and location in the browser.
      </Note>
   </Tab>
   <Tab title="Terraform">
   <Steps>
      <Step title="Setup Terraform Project">
         Create a terraform project and create the main.tf file shown as below.
   
         This file will set up the terraform provider plugin for Control Plane. It will also set up your profile, context and other necessary common values.
         
         ```hcl main.tf
         terraform {
            required_providers {
               cpln = {
                  source  = "controlplane-com/cpln"
                  version = "~> 1.0" # This constraint means use any version in the 1.x range
               }
            }
         }

         provider "cpln" {
            org     = "replaceWithYourOrgName"
            profile = "replaceWithYourCLIProfileName"
            token   = "replaceWithYourToken"
         }
         ```

         <Note>
            Use either profile or token, if you use profile, the system will receive a token from your cli profile.
         </Note>

         // TODO guide for creating a service account and using its key here
      </Step>
      <Step title="Workload Definition">
         After having the basic setup with `main.tf` file, you can create a `workload.tf` file with the content below.

         This file describes the example workload we want to create.

         ```hcl workload.tf
         resource "cpln_workload" "example" {
            name        = "example"

            container {
               name   = "main"
               image  = "cplnquickstarts/helloworld-go"
               ports {
                  number = 8080
                  protocol = "http"
               }
            }

            firewall_spec {
               external {
                  inbound_allow_cidr  = ["0.0.0.0/0"]
               }
            }
         }

         output "terraform-cp-gvc-example" {
            value = cpln_gvc.terraform-cp-gvc-example
         }   
         ```
      </Step>
   </Steps>
   </Tab>
   <Tab title="Pulumi">
   <Steps>
      <Step title="Prepare Pulumi Project">
      Execute commands below to create and setup a pulumi project

      // TODO guide to install pulumi

      ```
      pulumi new
      ```

      Follow pulumi cli directions to setup your project as you like.

      ```
      pulumi config set cpln:org replaceWithYourOrg
      ```

      ```
      pulumi config set cpln:profile replaceWithYourCLIProfile
      ```

      ```
      pulumi config set cpln:token replaceWithYourToken
      ```

      <Note>
         Use either profile or token, if you use profile, the system will receive a token from your cli profile.
      </Note>

      </Step>
      <Step title="Workload Definition">
      <CodeGroup>
      ```typescript Typescript
      import * as cpln from "@pulumiverse/cpln";

      const workload = new cpln.Workload("example", {
      containers: [
         {
            name: "main",
            image: "cplnquickstarts/helloworld-go",
            ports: [
            {
               number: 8080,
               protocol: "http",
            },
            ],
         },
      ],
      type: "serverless",
      gvc: "replaceWithYourGVC",
      });

      export const workloadId = workload.id;
      ```
      ```python Python
      import pulumiverse_cpln as cpln

      workload = cpln.Workload("example",
         containers=[
            {
                  "name": "main",
                  "image": "cplnquickstarts/helloworld-go",
                  "ports": [
                     {
                        "number": 8080,
                        "protocol": "http",
                     },
                  ],
            },
         ],
         type="serverless",
         gvc="replaceWithYourGVC",
      )

      workload_id = workload.id
      ```
      ```go Go
      package main

      import (
         "github.com/pulumi/pulumi-cpln/sdk/go/cpln"
         "github.com/pulumi/pulumi/sdk/v3/go/pulumi"
      )

      func main() {
         pulumi.Run(func(ctx *pulumi.Context) error {
            workload, err := cpln.NewWorkload(ctx, "example", &cpln.WorkloadArgs{
               Containers: cpln.WorkloadContainerArray{
                  &cpln.WorkloadContainerArgs{
                     Name:  pulumi.String("main"),
                     Image: pulumi.String("cplnquickstarts/helloworld-go"),
                     Ports: cpln.WorkloadContainerPortArray{
                        &cpln.WorkloadContainerPortArgs{
                           Number:   pulumi.Int(8080),
                           Protocol: pulumi.String("http"),
                        },
                     },
                  },
               },
               Type: pulumi.String("serverless"),
               Gvc:  pulumi.String("replaceWithYourGVC"),
            })
            if err != nil {
               return err
            }

            ctx.Export("workloadId", workload.ID())
            return nil
         })
      }

      ```
      ```csharp C#
      using Pulumi;
      using Pulumi.Cpln;

      class Program
      {
         static Task Main() => Deployment.RunAsync(() =>
         {
            var workload = new Workload("example", new WorkloadArgs
            {
                  Containers = 
                  {
                     new WorkloadContainerArgs
                     {
                        Name = "main",
                        Image = "cplnquickstarts/helloworld-go",
                        Ports = 
                        {
                              new WorkloadContainerPortArgs
                              {
                                 Number = 8080,
                                 Protocol = "http",
                              },
                        },
                     },
                  },
                  Type = "serverless",
                  Gvc = "replaceWithYourGVC",
            });

            return new Dictionary<string, object?>
            {
                  { "workloadId", workload.Id },
            };
         });
      }
      ```
      </CodeGroup>
      </Step>

   </Steps>
   </Tab>
</Tabs>

## Browse to the running Workload

In this step, you will browse to the global endpoint URL that was generated for this [Workload](/reference/workload). This URL is automatically secured using TLS, load balanced, and DNS geo-routed to the nearest healthy location.

1. After a minute or two, if the deployment was successful, the `Workload Health` will indicate `Ready`.
2. Click the `Open` link besides the `Global Endpoint` URL to launch the application in a new tab.
3. The output of the sample application will be shown indicating the cloud provider and location closest to you that served the request.

## View individual deployments

In this step, you will launch the sample application at each [Location](/reference/location).

1. Return to the console and click `Deployments`.
2. Next to each location is an `Open` link that will launch the application at its respective location. Take note that the URL is secured using TLS.

The output for each location will be similar to:

<CodeGroup>

```text aws-eu-central-1
Hello World!

Provider: aws
Location: /org/ORG_NAME/location/aws-eu-central-1
```

```text gcp-us-east1
Hello World!

Provider: gcp
Location: /org/ORG_NAME/location/gcp-us-east1
```

</CodeGroup>

## Summary

With a minimal amount of effort, you were able to deploy an application to multiple cloud providers and locations. This [Workload](/reference/workload) is now managed by Control Plane and you can easily modify any of the available options.

Click the `Next` button below to learn how to configure a custom domain for your [Workload](/reference/workload).
