---
title: Query
---

Clients and items can select/filter other items with the help of queries. Queries utilize [tags](/common-configs/tags), `propertites` of an item or the `relations` of it to execute.

Query is also used for sorting items when fetching a list of items, by any property and by ascending or descending order.

Some examples are of the items that uses queries;

- [Group](/objects/group) can dynamically assign users.
- [Policy](/objects/policy) can target items or principals with queries.
- [GVC](/objects/gvc) can dynamically update its assigned locations.

## Quick guide for using queries

A query consists of terms, each term can target tags, properties or relations (`rel`).

For `rel` term, the value depends on the kind, as an example, workload has `gvc` rel. Which would allow you to filter workloads in an org by the gvc they belong to.

<Tabs>
  <Tab title="UI Console">
    In the UI Console, each page that lists items of a kind has a query button on top of the table.

    <Frame>
      <img src="/public/images/reference/misc/query.png" />
    </Frame>

    The `Match Tags By` selector values are:

    | Selector | Definition                      |
    | :------- | :------------------------------ |
    | All      | All tag items should match      |
    | Any      | Any of the tags should match    |
    | None     | None of these tags should match |

    To filter resources based on their tags:

    1. Click on the `Query` button
    2. Select which term you want to target, one of tag, property or rel.
    3. Type a value for the selected term key.
    4. Select the operator and type the term value if needed.
    5. Click `Apply` and the filtered resources will be displayed

    To remove the filter, click on the `Query` button again and click `Clear`.

  </Tab>
  <Tab title="CLI">
    Every item kind supports a query command. Below are a few examples:

    ```
    cpln workload query --match any --rel gvc=my-first-gvc --rel gvc=my-second-gvc
    ```

    ```
    cpln workload query --match all --tag environment=production --tag region=europe
    ```

    ```
    cpln workload query --match all --rel gvc=emea --tag payment-service=true --tag thisTagExists --tag version
    ```

    See [cli reference](/references/cli) for the corresponding item kind for more details.

  </Tab>
  <Tab title="API">
    Every item kind supports an api request path that ends with `/-query` and accepts `POST` as the http method. Below are a few examples:

    ```
    https://api.cpln.io/org/myorg/workload/-query
    ```

    ```
    https://api.cpln.io/org/myorg/agent/-query
    ```

    Here is an example request body for querying with api:

    ```
    {
      "spec":{
        "match":"all",
        "terms":[
          {"op":"=","tag":"region","value":"emea"},
          {"rel":"gvc","op":"=","value":"mygvc"}
        ]
      }
    }
    ```

    See [api reference](/references/api) for the corresponding item kind for more details.

  </Tab>
</Tabs>
